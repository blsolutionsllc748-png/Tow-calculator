<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Transport Cost Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      --brand-bg:#0b0f14;
      --brand-card:#ffffff;
      --brand-text:#111827;
      --brand-muted:#6b7280;
      --brand-accent:#c1121f;
      --brand-accent-2:#0b1220;
      --brand-success:#16a34a;
      --brand-blue:#2563eb;
      --border:#e5e7eb;
    }

    body{font-family:Arial,sans-serif;background:#f3f4f6;margin:0;padding:0;}
    .container{max-width:820px;margin:40px auto;background:var(--brand-card);border-radius:14px;padding:24px;box-shadow:0 10px 25px rgba(0,0,0,.08);border:1px solid var(--border);}

    .header{display:flex;align-items:center;gap:12px;justify-content:center;flex-wrap:wrap;margin-bottom:6px;}
    .logo{height:42px;width:auto;display:block;}
    h1{text-align:center;margin:0;font-size:24px;color:var(--brand-text);}
    .subtitle{text-align:center;font-size:14px;color:var(--brand-muted);margin:8px 0 18px;}
    label{font-weight:bold;font-size:14px;display:block;margin-top:12px;margin-bottom:6px;color:var(--brand-text);}

    input[type="text"], select{
      width:100%;padding:10px;border-radius:10px;border:1px solid var(--border);
      font-size:14px;background:#fff;
    }

    .row{display:flex;gap:12px;flex-wrap:wrap;}
    .col{flex:1;min-width:240px;}

    .checkbox-row{display:flex;align-items:center;margin-top:12px;font-size:14px;}
    .checkbox-row input{margin-right:8px;}

    button{
      width:100%;margin-top:18px;padding:12px;
      background:var(--brand-accent-2);color:#fff;
      font-size:16px;font-weight:bold;border:none;border-radius:12px;cursor:pointer;
    }

    #result{margin-top:16px;font-size:15px;min-height:44px;}
    .meta{margin-top:8px;font-size:13px;color:var(--brand-muted);}

    .badge{
      display:inline-block;padding:4px 10px;border-radius:999px;font-size:12px;
      background:#fee2e2;color:#7f1d1d;border:1px solid #fecaca;margin-left:6px;
    }

    .cta{margin-top:14px;gap:10px;display:flex;flex-wrap:wrap;}
    .cta a{
      flex:1;min-width:160px;text-align:center;padding:11px;
      color:#fff;text-decoration:none;border-radius:12px;font-weight:bold;
    }
    .cta .call{background:var(--brand-success);}
    .cta .sms{background:var(--brand-accent-2);}
    .cta .email{background:var(--brand-blue);}

    /* ✅ ALWAYS VISIBLE BOOKING BUTTON */
    .cta2{
      margin-top:12px;
      display:flex;
      flex-wrap:wrap;
    }
    .cta2 a{
      width:100%;
      text-align:center;
      padding:12px;
      background:var(--brand-blue);
      color:#fff;
      font-weight:bold;
      border-radius:12px;
      text-decoration:none;
    }

    .disclaimer{margin-top:16px;font-size:12px;color:var(--brand-muted);}
    .hr{height:1px;background:var(--border);margin:18px 0;}
  </style>
</head>

<body>
<div class="container">

  <div class="header">
    <img class="logo" src="logo.png" alt="B-L Auto Export" onerror="this.style.display='none';" />
    <h1>Transport Cost Calculator <span class="badge">Broker estimate</span></h1>
  </div>

  <div class="subtitle">
    Local towing + nationwide auction/port transport. Final pricing confirmed before dispatch.
  </div>

  <div class="row">
    <div class="col">
      <label>Service type</label>
      <select id="serviceType">
        <option value="local">Local Tow</option>
        <option value="transport" selected>Auction / Port Transport</option>
      </select>
    </div>

    <div class="col">
      <label>Vehicle type</label>
      <select id="vehicleType">
        <option value="sedan">Sedan</option>
        <option value="suv">SUV / Crossover</option>
        <option value="pickup">Pickup</option>
        <option value="van">Van</option>
        <option value="oversize">Oversize (manual quote)</option>
      </select>
    </div>
  </div>

  <label>Shipping type</label>
  <select id="shippingType">
    <option value="open">Open carrier</option>
    <option value="enclosed">Enclosed</option>
  </select>

  <div class="checkbox-row">
    <input type="checkbox" id="portExport" />
    Port / Export handling (+$75)
  </div>

  <label>VIN (optional)</label>
  <input id="vin" maxlength="17" placeholder="17-character VIN" />
  <div id="vinInfo" class="meta"></div>

  <div class="checkbox-row">
    <input type="checkbox" id="nonRunner" />
    Vehicle is a non-runner
  </div>

  <div class="hr"></div>

  <label>Pickup address</label>
  <input id="pickup" placeholder="Copart / IAAI address" />

  <label>Drop-off address</label>
  <input id="dropoff" placeholder="Shipping yard / Port" />

  <button id="calcBtn">Calculate Estimate</button>

  <div id="result"></div>

  <div class="cta">
    <a class="call" href="tel:5083692955">Call Now</a>
    <a id="smsBtn" class="sms" href="#">Text</a>
    <a id="emailBtn" class="email" href="#">Email</a>
  </div>

  <!-- ✅ ALWAYS VISIBLE -->
  <div class="cta2">
    <a href="./shipping.html">Book RoRo / Container Shipping</a>
  </div>

  <div class="disclaimer">
    This is a non-binding estimate. Final price may vary. We confirm before dispatch.
  </div>

</div>

<script>
const GOOGLE_API_KEY = "PASTE_YOUR_API_KEY_HERE";

/* Pricing */
const TRANS_MIN = 200;
const PER_MILE = 1.5;
const NONRUNNER = 125;
const PORT = 75;
const BROKER = 70;
const ROUND_TO = 25;

const VEH_MULT = { sedan:1, suv:1.15, pickup:1.25, van:1.2 };
const SHIP_MULT = { open:1, enclosed:1.6 };

function money(n){return "$"+n.toFixed(2);}
function round(n){return Math.round(n/ROUND_TO)*ROUND_TO;}

async function getMiles(o,d){
  const r = await fetch("https://routes.googleapis.com/directions/v2:computeRoutes",{
    method:"POST",
    headers:{
      "Content-Type":"application/json",
      "X-Goog-Api-Key":GOOGLE_API_KEY,
      "X-Goog-FieldMask":"routes.distanceMeters"
    },
    body:JSON.stringify({origin:{address:o},destination:{address:d},travelMode:"DRIVE"})
  });
  const j = await r.json();
  return j.routes[0].distanceMeters/1609.34;
}

document.getElementById("calcBtn").onclick = async ()=>{
  const o = pickup.value.trim();
  const d = dropoff.value.trim();
  if(!o||!d){result.textContent="Enter pickup & drop-off";return;}

  result.textContent="Calculating...";
  const miles = await getMiles(o,d);

  let total = Math.max(TRANS_MIN, miles*PER_MILE);
  if(nonRunner.checked) total+=NONRUNNER;
  if(portExport.checked) total+=PORT;

  total*=VEH_MULT[vehicleType.value]*SHIP_MULT[shippingType.value];
  total+=BROKER;
  total=round(total);

  result.innerHTML = `<strong>Estimated cost: ${money(total)}</strong><br>${miles.toFixed(1)} miles`;

  smsBtn.href = "sms:5083692955?body="+encodeURIComponent(`Estimate: ${money(total)}\nPickup: ${o}\nDropoff: ${d}`);
  emailBtn.href = "mailto:info@blautoexport.com?subject=Transport Quote&body="+encodeURIComponent(`Estimate: ${money(total)}\nPickup: ${o}\nDropoff: ${d}`);
};
</script>
</body>
</html>
